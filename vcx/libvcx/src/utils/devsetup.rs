extern crate rusqlite;
extern crate rand;

use utils::constants;
use utils::libindy::signus::SignusUtils;
use schema::{create_new_schema, get_sequence_num};
use utils::libindy::wallet;
use utils::libindy::pool;
use settings;

/* INSTITUTION/ENTERPRISE settings */
pub const AGENCY_ENDPOINT: &'static str = "https://enym-eagency.pdev.evernym.com";
pub const AGENCY_DID: &'static str = "YRuVCckY6vfZfX9kcQZe3u";
pub const AGENCY_VERKEY: &'static str = "J8Yct6FwmarXjrE2khZesUXRVVSVczSoa9sFaGe6AD2v";
pub const SDK_TO_REMOTE_DID: &'static str = "AQ2EZRY9JQ4ssjmZPL5MiU";
pub const SDK_TO_REMOTE_VERKEY: &'static str = "684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX";
pub const REMOTE_TO_SDK_DID: &'static str = "7csYfSY8b4hvqnu5K8nGQP";
pub const REMOTE_TO_SDK_VERKEY: &'static str = "4cDwBvDZy9aWWKf2uCYTSgffCNt7ffmY9nrMTHmqsG8z";
pub const INSTITUTION_DID: &'static str = "2hoqvcwupRTUNkXn6ArYzs";
pub const INSTITUTION_VERKEY: &'static str = "vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf";

/**
 * CONSUMER/USER settings
 * generated by running provision script with: --enterprise-seed=00000000000000000000001DIRECTION --agent-seed=00000000000000000000002DIRECTION
 */

pub const C_AGENCY_ENDPOINT: &'static str = "https://cagency.pdev.evernym.com";
pub const C_AGENCY_DID: &'static str = "dTLdJqRZLwMuWSogcKfBT";
pub const C_AGENCY_VERKEY: &'static str = "LsPQTDHi294TexkFmZK9Q9vW4YGtQRuLV8wuyZi94yH";
pub const C_SDK_TO_REMOTE_DID: &'static str = "QgUb4aHJ2cigGZCrEe7DHk";
pub const C_SDK_TO_REMOTE_VERKEY: &'static str = "DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q";
pub const C_REMOTE_TO_SDK_DID: &'static str = "7faARCpBNrEESKmvBejhV7";
pub const C_REMOTE_TO_SDK_VERKEY: &'static str = "4dhJ9JkxJm4n5QbYUR9r3KcUoC34yZJgXouRa2PKgMUE";
pub const C_INSTITUTION_DID: &'static str = "GXTZy9GzdtD2c1J88Jrn8C";
pub const C_INSTITUTION_VERKEY: &'static str = "9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc";


static DEV_ENTRIES: &[[&str; 3]; 23] = &[
    //Todo: Remove all cred_defs that don't have updated format
    [
        r#"master_secret::main"#,
        r#"{"ms":"65799204187227524848912938308748253300514297999295642077060693146216328813804"}"#,
        r#"2018-05-01 16:39:37"#,
    ],
    //Credential for (name, age, sex, height)
    [
        r#"credential::a030c52e-0917-4e86-bc24-4bc7171db690"#,
        r#"{"schema_id":"2hoqvcwupRTUNkXn6ArYzs:2:schema_name:0.0.11","cred_def_id":"2hoqvcwupRTUNkXn6ArYzs:3:CL:1766","rev_reg_id":null,"values":{"age":{"raw":"111","encoded":"111"},"sex":{"raw":"male","encoded":"5944657099558967239210949258394887428692050081607692519917050011144233115103"},"height":{"raw":"4'11","encoded":"25730877424947290072821310314181366395232879096832067784637233452620527354832"},"name":{"raw":"Bob","encoded":"93006290325627508022776103386395994712401809437930957652111221015872244345185"}},"signature":{"p_credential":{"m_2":"31700338570294708736115754102769589522052428093121126330650183539696104868123","a":"53979198982953480941361715714025446650293830702592366383428624754649291809766604199937837563420283823149717544671612767532823327712241886283560895741403938075518312090503154628856449765024862771773478492802997324977825764262134484576280596868559859044942834353704177757720210642229719312576454986354520477533908654325587734836590802611579172274639355197583326715912018200999734836746314454651229086386981454605481523521687113556602279070411147099521163248094733947041115902321564026068232917683439910014622675444481808064857902796371269786765806093832027550033537484685495556682732590046296030326638802898142152165372","e":"259344723055062059907025491480697571938277889515152306249728583105665800713306759149981690559193987143012367913206299323899696942213235956742930336906336838918265746995649015494481","v":"9875948535193483265793246073877026790039380001746479571592619950773960800238853990738790197089646381317395442346002302520075748768293692936374984823548655271512698601349845804863705062830711489764081366568930629467790146405681338928154889703541535787069165062326597020996195104670373345486641207213115033501722600846415828017301791253582972304122434634783161052138664003151987089804378483410964776140236703566033624787957038351869536996625748554571300642274570572728968490101968135549090348334490812113619960426104552967700756186859975722527049527634281338327587283838955028124721261157592558724543641257370726814581088543383447242771966391751087251464575448309432442908038856921408129698087633471148600494120667081705184421267441050826608177233560108907237230931223649289065975306421393821505104341595814055895078797024"},"r_credential":null},"signature_correctness_proof":{"se":"14989062026709791196056466848635055009512882875461097498630366316825008121462701913983484388941415642398374674433293281866035613135413615366229498750625695021337578674006945223073825963867866613203021598083495173726339155438396679979027958576143540070048904448764200062803232886377041316876561088167049303749805180002977581308273363485023421792821631594062653311751212128020417079065010396956412970678521480436536493672182132378883088276905030147377961321398261379814393039594685063767314832597203869361328352895509144450419469527405328044364228248134912926486484072185658035560605767857263486455171340691181281336089","c":"109321636906543721822170120912137620071094950976797552456972107618795939373416"},"rev_reg":null,"witness":null}"#,
        r#"2018-05-01 16:39:37"#,
    ],
    //Credential for (address1, address2, city, state, zip)
    [
        r#"credential::95303ecc-bdfd-440d-93ba-79df06253c81"#,
        r#"{"schema_id":"2hoqvcwupRTUNkXn6ArYzs:2:Home Address - Test:0.0.1","cred_def_id":"2hoqvcwupRTUNkXn6ArYzs:3:CL:2200","rev_reg_id":null,"values":{"zip":{"raw":"87121","encoded":"87121"},"city":{"raw":"SLC","encoded":"101327353979588246869873249766058188995681113722618593621043638294296500696424"},"address1":{"raw":"101 Tela Lane","encoded":"63690509275174663089934667471948380740244018358024875547775652380902762701972"},"address2":{"raw":"101 Wilson Lane","encoded":"68086943237164982734333428280784300550565381723532936263016368251445461241953"},"state":{"raw":"UT","encoded":"93856629670657830351991220989031130499313559332549427637940645777813964461231"}},"signature":{"p_credential":{"m_2":"31700338570294708736115754102769589522052428093121126330650183539696104868123","a":"5597176642441064505587492438525336590675737753073274001797560521596721737922690003518952060874400611551670715509216564565556366782663376463233764175338573763285479341730879726730159994205516990589526685447664046220952615485511699349679031143262573964214790331192723895603154891813650023135252730132756379458464831740179250217968888303778244460741358815838334411542389723244131981550243181283736412792034038683080857090937871242089262648224819784203353843453479700413520481303921957846703102427992325894957817376936477970532954576138239808185603884083123418259144430927057233975693544632670746246194269733691934994744","e":"259344723055062059907025491480697571938277889515152306249728583105665800713306759149981690559193987143012367913206299323899696942213235956742930194306715270547877876096884891753699","v":"7470682474659052504945709596668453578065889728077409771770302178580455511007149260274869582495784210597133044859215124029399609225974834506852563488296724727804033062471827353211527912717058657771123706280601108794943549804034256233358266702491958749126175153744279909096515350421954636128628433438936329255003942601164378414184933507903334083405747381245267857460626821792908340337679447741822103329945945371990371315096177701683370489671317491177267939828548709679994681158158750818767211519719671379130326801887902072107370038808883405701734466746232422384916716902753873655205100357317001083932032211308219310786322663588551470642618848263398818211204846120606678856845215722892915523279470913689024351941344799690492941260546252232744511058519380502051993594093689394433090284933090426035110878621968646235796411883"},"r_credential":null},"signature_correctness_proof":{"se":"6127276655919734987926077543624663718043257400169444074288892226016480533084325715036475063851835797700941711217583502383233344670638209716820114595992459439871715503312793121694416700084207073983483118210768009804280269453202209971684724354101425890402581053508133395032116771808350686868356763690620166897092237362830818696440086883618339910210869078805287323959695675834802820884099722899049872126171397194286667874220921726097752162944191790765206475066573714391161206116546508132065456596542227553806128385757096377296688203765364935649408788226236789423059095500740449725319080946740631561347913461046276530714","c":"40995204820600829959066653462620445771825247855110086947984506397006826734455"},"rev_reg":null,"witness":null}"#,
        r#"2018-05-01 16:44:03"#,
    ],
    //Cred Def (name, age, sex, height)
    [
        r#"credential_definition::2hoqvcwupRTUNkXn6ArYzs:3:CL:2471"#,
        r#"{"ver":"1.0","id":"2hoqvcwupRTUNkXn6ArYzs:3:CL:2471","schemaId":"2471","type":"CL","tag":"tag_1","value":{"primary":{"n":"86724287350477751206656570979032966703329505889109970100672593600212159710122524558840987784946586074662132488236400738181991816412026591140984921370179767079606062874849350699068544007953394425621170412614434471437870413981961728213356970896311390324401528063993712079175929421151002066958792621968526123052543362726709351064982035483300909753311188927834431210143615918489181734829742678671085195486779344279087570275333764801067819032638761795735427697089756560490683732524286268242592541483561421003008848905312960263229239327096444856373881655366169784000740449827583427336247268796008957239930929940106124383441","s":"68565823032708474306514409710254746185097024905866456492400609548513882080060651547254886717209317635536647955345162687060898443709138147278667084384903589486496041039093776147061990629509796556903457618318946948477020316739616698285098064517065210309432231348425794038491136239768243653004282415622183771020331818660661942833453261537705421796886050819425946416534064887172474631878946648680969678450250632713392749852095439858412085632624401434183699289763190966729771549896627986528002008455144081216013915376906960616224100785288425229004552127157820129850247623860663716001315305824246521524314406787572201936159","rms":"57279696110727020230628302576589700618183762363882960191767791103858409422237116150822746386702678537060617035162158771261021205326414811089995155468452732347369957531042614743687780641303019056601049908281597307105484509385119697735678823173668624081938728770800068935332426199032434097694521029943581293515608277055518864299564909952705207331157426572681898162714820056622424494845195263946986591012537422825086117775467510208980394650070899723933489945234503492645580931663241570210025903493959090620866405770418934478358877241756698114261254562875594267266148011094739462828069179559394070466727563845901362557339","r":{"sex":"20022101741446570264557630399489699993011383357495333780962515915463701761385865327966524872646907887816919241795166812245521381526599594939708271733894974601885444697364264320467230587792262093722414489552649750887746173699408773581709694927717324336563255309885303903452791340447296644230298702852495919610048570998314143211678209843631329899528727189541506380135323384697685129288034139901316951883056009308816474794904871533784876333707034390658024899757223718233822416033410932755695918855013227912649125625613708302826940395050959425506559689930729589702715565613350872257404294852981485742693414175561560376878","name":"21470694100729869744261292006763813345150044183446029540177870124524039106316094174460389232832571532284810170007293388299473733141322565289343893281311432223107289867486737597507381929324412597111791890822982978607377646493268665410154158352332552430455410676424655538131806962743837140975034501945349610114128040516920426419752180449876110429631390074018339624366625706057577988994157784979295579958266166722663022918076663412107247120922543421973109778231583641494528977463571610522286622037737315024310026589510134042108138559662654575330826743445692198806461970153226357910705261181205457260549327597981951573985","age":"68324431017386373141723313379588123114122172733785498028129098771912332870161622586830226725832682089282797682478996628527458521203981066532148542867910727876973540501604298386964941331385945509447921573334640257131480681017298967411615851997278468982114318053852745062107685596645860574744820479443008568550713733647938784629517351521220040117482812057845591724691129906359015250113706837112935971415735663780322204054449465947028328022534972551186400163012220719718039176357586730457386744557089473465341563472760872536594611618365110919837962302554808225102415883187587908311141004150113254350300861684974387245524","height":"13939356647759609174485719802501773567276049548245424935504126500265586608662951980260718040791134755864486701853050225651855956737901595730976263505088594378380074293405559194748221759603581890598079117782820527925868489919600695104312261805970657325246956081208878862007439057712465023318674543859367201399080194572966833003881512520725074633033420930095211305635173717467241968613481516063152487980820555533755239133651769565133420156114776578165410212221881994925880629770028898705859268663836663647027677768478228049082189465977511902707373041793879289766830466362779198318255196657839703097701957436211432866940"},"rctxt":"28968968789316921956195020159043701485128084666788319688919703768305257857030853826651494435280634703130965749799263847281089261890586404514554128897545567559411392274924672850695923428556666839524191639557540925894441247523915911594915810062115573022491175505153277512476305377826383134343681670368530974886362266706187655064207938621808588725531887931062314044094064943783008218642721898688548716600959291789899808528982572786472183338043212505885146997913313141282478028502666021364027851488363355869491118603841447843857893374823843951923935275949332495109370644946403701670919133621008245580388712016814216268114","z":"86577229265747009560052615679615895419349481058284021085673929260636969170535560390660022683481326803220581815884464749038506104457182906050929596940529151731519096012460995580213574923115394453664191902057791953043346629148369777542113599040511920597866451649154423915282977750060280596799442262757753909295114858121438822608110664099684925371671089644086196379734044256966499814680946051154187391597679900273906654730748525684870945928000260002993274218927561839707361816863918092159839143300439497578075981381842189307826991559468115699410540879665465127893208243916471732332308562108973634353200261591256745812234"}}}"#,
        r#"2018-05-11 16:23:56"#,
    ],
    [
        r#"credential_private_key::2hoqvcwupRTUNkXn6ArYzs:3:CL:2471"#,
        r#"{"p_key":{"p":"158791708833701604239040385250451750244199983250724712906625946224431955581896368471978511385306533498009168213504865960611640414542820959482065794314822252181215073921258241435542472849983740338361752312910657265705825519573139878783140455906237323547653365413329454596301712351139576682716064113477191424311","q":"136537807904853875065727849681022899133764558428989497544091631561929608352384729408451381092021973241344247566766858473174089229857657635598028629637381884685613240721560907528808000994706285484533167802414993538035709464071312178573554744315128428435791354822790061377832870453587082531771421377557394277983"},"r_key":null}"#,
        r#"2018-05-11 16:23:56"#,
    ],
    [
        r#"credential_key_correctness_proof::2hoqvcwupRTUNkXn6ArYzs:3:CL:2471"#,
        r#"{"c":"5332584803272926894166915187486042523274422459070951650815887020442117520684","xz_cap":"20305811914260659761334080873620423122618481379155970714938498226771354443620010715375454655521623891475834732324325834667783939662445561281280344876200288273009829579444500155868831356789138618273485753324694137571603328663173547427809916773297994408227615868536047948642163592396561561177722966967253374076658130556206036510236165170148689054636191255868939025604811440619443782886735970153406853396972112879421305032457173038719280466787199142578220126969373402190103849113098083640894842219027382887417584808285994769482082135909488115226928105781435085328618499381146870147507780192415978983984849580682937847285646975371159413701333383368521093124895868635387253029959264280132790404334","xr_cap":[["sex","39284493107109322524121924676166228080086752115006607054289636146914916724576665668260620917261577192381902382827453004783472240953911534545232821394543251988429208599114245556239846883013201200701525596844737742356681731430486735556615752340182460196361711787651912483517837518189669202186297427985925395908108352865815228158505351857866187292791359204538355058333230695108979256567530968399211567992342509051406759044478804107852066017744864902928431702839670147738576948349387146248067738112393758133460020013762037774649539805656721869251578930073869065000512464788521195920250391698685860991231499409045322503809799683276584633602125674727865121836791647384685569567286372974945321882541"],["height","59350348124267706840690234804919406149273640925911166250343729134966300578012544539322791989772754516861393388897941254714589083908870763946221359862122214283117122677626717431846424343717175426617257408984269022602878616149664261030639268357243236541491867329343028034693171408359867464472301207663462092563623634740632397417055384753856732575694424994532885123137618057418611099298243586417289583779290522611687587491595888642344177226518111853494311898450964143834804301736875666619150766549383695869655977263708852848680476106685490417844914508092605316756088271658445499458185793173220303194309379823794410275593584919652940194035259467303300213542952549398881350657694498191510301764672"],["age","59413838007394937119544971697596543284628582142098931852516723372431531283768768177392006535955893619047429260161714984188150285206387540217770098420899955089808600042592548027905854120542059649156223939063072460491704058234412912955189843736129221652567875656160987283059666873623156184386699344473779422026650261236258043187621159102964054201187435034751696166904054627486332910391306108521411752498564382961085691882275525387984287594538027244491375631803466809234312817547537799509490524173895230391603310088113462684136292001744544740755729488621595645811700475285811718933695793353856689224271054172976146027646874455246299426240484603391738243567719303253586980226082258947907637631648"],["name","32592485740168045997777253526854266289908291250927965906294793186358342951765158531019819797389056462575349988949287857457628851606011823486131620594108912717423294513671367921404501826464033166757072968593010591747117587495172905653859025641675423728880441781529988670819749449756069858179326014605229657533284563429976532872500152225646026007763074821716127745877579549013771663098603388078887569060330042744143540464279588196283831307696282113872770055664218292641292452268789760422768602905509206881138617112750054016829847810361310288271807854044103747446629058489431232977860583009709934613842153069288820103550450302525204465530933202115612487195873774890022107328297911480614675268188"]]}"#,
        r#"2018-05-11 16:23:56"#,
    ],
    [
        r#"full_schema_id::2hoqvcwupRTUNkXn6ArYzs:3:CL:2471"#,
        r#"2hoqvcwupRTUNkXn6ArYzs:2:test-licence:4.4.4"#,
        r#"2018-05-11 16:23:56"#,
    ],
    //Cred Def (address1, address2, city, state zip)
    [
        r#"credential_definition::2hoqvcwupRTUNkXn6ArYzs:3:CL:2200"#,
        r#"{"ver":"1.0","id":"2hoqvcwupRTUNkXn6ArYzs:3:CL:2200","schemaId":"2200","type":"CL","tag":"tag_1","value":{"primary":{"n":"88741284735403627216579666445694560558291418910640885296627342810813627933761476222534542086276727126630226733088063195376716384706469172092923179837908728253289279633399513435651713873851291740703722216980636849177504347147685486967494304077144889107783736436339681101052231156979418107515805123711768725575028387421426023825216921186491086591770148727981419917910961690179017275154157394430305159246222234015246854150924781029677935632380150766468104112585143944752056528191020319252022377887959963099791448503890283755396791644156566260224646337216549248538436113605405990054347447087414661022163623782149242755281","s":"23422138450373260989546372803115905641429253019932757265764411814693917814730423396029543506427431107665463947114169534076042193815528183146645420258112474862719021707331593605396225768279207734279633815192422338334694078772537553126536044898975802734897891868806614190697417567363338252065297043091389320715898373041509995550073447371429038334554743966249912729606382433360147646177567244229035730937621795612488768368095424517559734254618036657745253362566956753330419475460542872607366002966225352713533684180880587812941450913626746889267368030392100454734606127330235116180237948466508587790217696662741065259267","rms":"14447975426311280479267132899990817489642669520214924034998252453489878720129716543819898252550917326007580824656081988032523858513123563167777630315137695361795797869632927119293523112768579245237362505316312236387692966651790066151195595298934567834474278895809726258324375630086066640958723484758807579558930597918236747606697358633527807930259505684259342001021950836180573604506227244690564184163809645915604366081096410734484575261506736276140979835103702656776033509038812552269730221450265820294148773417211917674516951997126843255319065938921384137073696700116755175666936459116936561934469841477892805256141","r":{"address1":"2329876614391411563216683676077262228807847984352010100994890569466145378804569973486952228457580070495645577096128323607220991946128378534929692246880254438512269402045990696920755520338869296240866474579730425540671161142974502897590569823444794818539268860195366564053797409235605669968962252967383128091733606890808872142019223473959683244898299588101611186189505053459440511260001236088455626342091340089542616819011542772831670501003374326119607136962331648177694614060843189523323211413325653051905878406602013492391525669304577640049743766383004621970399078582660516043951364551586458397689565264219982128251","address2":"19555477601739386095981730245686558150891541525006779166172451283338091012567527259543439693497829546050281467156813553623726310059614444378581120194452489782393859492815326995392721685596909502791668405483605897205502023919264433703925795772184587177409936498087254406616175946169289444508481860637355419693798382917460025617427874613455109512107272512304304104906593970936717384774606309078932065707520524244463905987599522832675327192003768240357565000098017077857518036420185085830749303817570797252661573593545972381969693213032145555785557171042925649411870684921818964119502006215880946497988812317390769697729","city":"64207515840078382943292262079609797529323428107407346258064035891565810068650783432280668631249979192598709282156087609163524304223309281731783844316185443619999776343259676649413856722232942986890376525470425228820394938502810712398674377441429429362789673119682032341339305175196708447490579654671200180592586121923696945190584746522353219980296379868047103438227465262411362758994523172646208640637873323080134672178633544293891576196909296569112742568688378727293473745450879827390318066879697661520151842832868367837404550720649353378520677531608805204998138507919750895017109246232853373016446112161427489521690","state":"12354275070366449591120391350507606720463235964209956584348892277576324745652881861602328922589674658602081642432856770058340373914947775153412510137860231129202780585752212606794574979876301154338738739003628519875036022769510858823901508550787221706222883140381824949084385679371125257748565240095902330799573579780737008139070668421367673319450781752205574254609649733855628292484886695380243432230385774357526270808424191428023784345390876286355231741257382392598080196879370321113465297398771385692268496497480618321400859631833232715620813359844312828294502486541980254323562579553445975851571819600189058944236","zip":"14462915285397475860757782964444122443816041700827207959933950039563781356808918367132295062757178397211465455065352165572252374148732198882609965220846203277042762313991175375352301766730152925725094303307718826925337032138957434900474367827428990566127416665779672688221239074290999569667390585766000743755856967549159502138446123510388761407805995531295159537567746225991070297278580276152319534254142525488709695832781642697887032158416443173298486685662446941725110992848373760808931217328080456730152704327293055645617744944771589057362029410228526171635083307634947624710720246161152856186839294562680237077377"},"rctxt":"40934416858610928126480022346407881069779623213459431992094088258918772686391208546748347039334218655753433338912390482455557861021351170988527551242549973135321964819135860275788772974148345905430701929056029637770699643195956286200790537381658472553137748888634189657468302247510663430609503740481297860894806250017610186488634869257464571965470345334025087651540431700249456722992188484289733987288470572105268628421116911370278536073150849020523410033213766172238632610634826459496359422971526742757581273424717936090992723143955466464227905103748683745283311598347510870400300644944780876775609331857034276870604","z":"87113457327189040549606413755936465163120406060040239814533511350745548814353394919946100309012768259096835212274923141544702119288985415468638558329784496624902829809270877569964121168787842654319183231029182134475613789902119588446644771097499988068858402566949162187846414990768373483049399849145160971436341137095889226232973883817135896469880229825082571254775109565981482815352439949440079737635836871402515819907047203967287316549820897777823515151202769784217702532251548445019873389827924572815788083893974550151139631295628772895984876759799066041401531707900225142621964126714211486728093180609627772980013"}}}"#,
        r#"2018-04-20 17:44:53"#,
    ],
    [
        r#"credential_private_key::2hoqvcwupRTUNkXn6ArYzs:3:CL:2200"#,
        r#"{"p_key":{"p":"160538453337316368586199398621784141453015866126585572680637133899770651587525122343568501440475733121513391437542837068499711274394079394737210404506880030245203826282376227875617699974283471150357273065826557356550391468590144772791507342470623667601036521496237443657625425021277713032893593582726714690131","q":"138193191242699226526241917897931696455587044821330904036386205061487193396623643751133557096472962912067669791905037625326979892319649376322931463409362975076046496472524595417586754978456388211873550122670184657622089802342908892529402704441954859967430180559967792009952276100478458378920253023207230537443"},"r_key":null}"#,
        r#"2018-04-20 17:44:53"#,
    ],
    [
        r#"credential_key_correctness_proof::2hoqvcwupRTUNkXn6ArYzs:3:CL:2200"#,
        r#"{"c":"10437046434447724155505596484473580601384814700515338401673278224431194077828","xz_cap":"22084314264637161944820490987660927987373399056575008779017867167252138440843668689412386147390458512078490541915569595570397019084805008979913962409821926812557891221993003863107415413778913370364772713619653725554770887802259724414168939551108788400593034511619183259379502138341181728673369248462488178472611280515580866602944116667248054771548720263629884407167939160570659379793468870933163914907281066313414821665452455442279998265055101151745441528995851448805986511959238732300333483894601148600448735983164365233442075320471417358812478077740026033213206531843104126570336561713466958732389645625747439437655397191915915307519403095375396648708479778768811932575403703547831837995933","xr_cap":{"address1":"116130756347546758865064292410910119613908005616874684870768245930744422424452608473488864426277910318275077328393777465966680908854907191434519279210426086728455594188097610546453200495322475265759403630582673420417140905256638851372628206951265134711719821160415379068855527896122160537958310505750908906026662603459460071016721615796276067296627294032058074821754867447244375501670748872590339924997326691822611674936394992625912878391713058434266694025688129851660366983202118163126546405730598670716246094068349710335657013342959765158418276593768702400257775165847783277703626288636267387637857566748692088500304428486460590840209157807349829763086747473577055728687068298417640436716616","address2":"214638503328996891442067100314786586721692224967237684130438162039240301205373970973524008450489085796656489123913255388938165905796340262028356929860992740480705326780321710385445334165341318479716073451414832901848099104392632322692484356014301245474718072201897862138488706664247390327337553732491721866890765772017680129373023959786554387289187428206853472031631588268189611785253701508719336108120768238021057793554177324401036388889569372500875963926684492525312171133840263462123370635466608424492781297170737445337293043892876693902991038916631586558624323993450928647619409426133313078547359364726044274172492968306920533024263429040766389968240830901292025950743923781160950501608459","city":"31826264030301679235002078942731341359101661557729688206568487303175136716483288387908742150994827761798635909652892447638715853514489532911862473765233457243812819426997068918737314446871759089450250778468141922105972317677089282538653161669066666987673900433393529176757365262836109688350414115698115708989714841347434209839491185111624044820383110013233315786249609870397637283376169555609646248779124706354138527048511457787159658598997513414710221791462980207138021073520016098639959256243514235171625109621126124604609607661012296775943485978636983510213597355127782156298528206958033305119255937575885360707887227526958345725429448035824024423606362625388502630662749523325565308929267","state":"207501426672673751384057579801074599847358913350702086994087893320506309342740309490592157168607818911465158043385035209111019257087162595589584785071897363452303756595642885465223334246834253264646246169761422047920538957523699213928290352548982941611657954826171699678026399702900453416643052327753470857362931872596958289990450122105158542499541673433712093150595376101794986210941102169327056918330374870133972952719907243507652329954169142993553324378198048054392661585201344779675971676515969829104855067857883057962745699161996084055820492234356136124096474384618984735596068860585892074603085641120430185215711369815024023791393977627734216307595579640016472800072832379466887960814272","zip":"207693033586554957480685787075602527576974753137260689388843122207683061325392554651058425412728050982006153068509180704088416218488851362628741024572051219850851926228736062042423645481812863095365666870816104068725683451621129988900696762980928412777061088760303308895474417790903153672356274535804666189822870270434373004487526241946157590145141680505337455414577326713541124877539321371869020773056731182080132685889580680017610705343462506972666691424385268918360286811678663037746611172172276492778726922887304442626130353175695021907907916220728005912768597606549298993600998673417618959395053168823643832152054298474603245215708759735379607230902437999278609459692938893127427173802671"}}"#,
        r#"2018-04-20 17:44:53"#,
    ],
    [
        r#"full_schema_id::2hoqvcwupRTUNkXn6ArYzs:3:CL:2200"#,
        r#"2hoqvcwupRTUNkXn6ArYzs:2:Home Address - Test:0.0.1"#,
        r#"2018-04-20 17:44:53"#,
    ],
    //DID DunkM3x1y7S4ECgSL4Wkru
    [
        "my_did::DunkM3x1y7S4ECgSL4Wkru",
        r#"{"did":"DunkM3x1y7S4ECgSL4Wkru","verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY"}"#,
        "2018-01-19 21:26:11"
    ],
    [
        "key::837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY",
        r#"{"verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6P2ZgcpNMagSN7K1TDc73gkBzdpqvUAmpPnnxRLqXeBZbv"}"#,
        "2018-01-19 21:26:11"
    ],
    //DID 2hoqvcwupRTUNkXn6ArYzs
    [
        "my_did::2hoqvcwupRTUNkXn6ArYzs",
        r#"{"did":"2hoqvcwupRTUNkXn6ArYzs","verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf"}"#,
        "2018-02-28 04:09:37"
    ],
    [
        "key::vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf",
        r#"{"verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPPWbEpqU41NEy3MmoeUuhq6T8F4JuRPgtj3hoT6BBjgnEF4bbhsR84NH"}"#,
        "2018-02-28 04:09:37"
    ],
    //DID AQ2EZRY9JQ4ssjmZPL5MiU"
    [
        "my_did::AQ2EZRY9JQ4ssjmZPL5MiU",
        r#"{"did":"AQ2EZRY9JQ4ssjmZPL5MiU","verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX"}"#,
        "2018-02-28 04:09:37"
    ],
    [
        "key::684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX",
        r#"{"verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX","signkey":"3GNKQyCswPamSCTPHj9BzJFY3DcXbswXLcteWUNtfgnD4f1rqbLiGTtqpehdg4nxpNz3o3S5iawopUCYbgURTGZT"}"#,
        "2018-02-28 04:09:37"
    ],
    //DID EmapZ8H9S2qPp3JKyfr5z1
    [
        "my_did::EmapZ8H9S2qPp3JKyfr5z1",
        r#"{"did":"EmapZ8H9S2qPp3JKyfr5z1","verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq"}"#,
        "2018-01-19 20:27:15"
    ],
    [
        "key::8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq",
        r#"{"verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6PvimpyRHkzenYNbW6eLf5DKWU9mWHFQMWVpMQc7Bq3EL3"}"#,
        "2018-01-19 20:27:15"
    ],
    [
        "my_did::QgUb4aHJ2cigGZCrEe7DHk",
        r#"{"did":"QgUb4aHJ2cigGZCrEe7DHk","verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "key::DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q",
        r#"{"verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q","signkey":"3vSwMtqns4Y8oy6oUZ2Uxmf8aUz4tayb8gSSEUnnbexNZrimVH5HdERSFi2aPdwQgC9ynBbYvBPCkUG2Xq2NapJF"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "my_did::GXTZy9GzdtD2c1J88Jrn8C",
        r#"{"did":"GXTZy9GzdtD2c1J88Jrn8C","verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "key::9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc",
        r#"{"verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc","signkey":"5QEbR1JPRorcTazTgdH71nQqzVDhHs8cqSzT2at6LeS7soCWBqhu1kFdiKyKaks1qyg5GAsQp3GFScNAAJUCiomJ"}"#,
        "2018-03-12 15:31:34"
    ],
];

pub fn setup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    settings::set_config_value(settings::CONFIG_ENABLE_TEST_MODE,"false");
    pool::open_sandbox_pool();
    set_institution_dev_config(wallet_name);

    setup_wallet(wallet_name);
    wallet::open_wallet(wallet_name, None).unwrap();
}

pub fn be_consumer() {
    set_consumer_dev_config()
}
pub fn be_institution() {
    /* use the existing wallet */
    set_institution_dev_config(&settings::get_config_value(settings::CONFIG_WALLET_NAME).unwrap());
}

pub fn cleanup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    wallet::close_wallet().unwrap();
    wallet::delete_wallet(wallet_name).unwrap();
    pool::close().unwrap();
    pool::delete(::utils::constants::POOL).unwrap();
}

pub fn set_institution_dev_config(wallet_name: &str) {
    let institution_logo_url = format!("https://robohash.org/123");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_WALLET_NAME, wallet_name);
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn set_consumer_dev_config() {
    /* NOTE: WALLET_NAME stays the same */
    let institution_logo_url = format!("https://robohash.org/456");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, C_AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, C_AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, C_AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, C_SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, C_SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, C_INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, C_INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, C_REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, C_REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn setup_new_wallet_with_new_credential(wallet_name: &str) {
    settings::set_defaults();

    pool::open_sandbox_pool();

    wallet::init_wallet(wallet_name).unwrap();
    let wallet_handle = wallet::get_wallet_handle();

    let (issuer_did, _) = SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_ISSUER_PW_SEED)).unwrap();
    SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_AGENT_PW_SEED)).unwrap();

    for x in 0..12 {
        let seed = format!("000000000000000000000000Issuer{:02}", x);
        println!("generating did/vk from seed: {}", seed);
        SignusUtils::create_and_store_my_did(wallet_handle, Some(&seed)).unwrap();
    }

    let data = r#"["address1","address2","city","state","zip"]"#.to_string();
    let version = "0.1".to_string();
    let name = "Home Address".to_string();
    let schema_handle = create_new_schema("1", issuer_did.to_string(), name, version, data).unwrap();

    //Todo: change to get_schema_id and update create_cred call
    let schema_seq_no = get_sequence_num(schema_handle).unwrap();

//    create_new_credentialdef("anything".to_string(), "anything".to_string(), schema_seq_no, issuer_did, false).unwrap();
}

pub fn setup_wallet(wallet_name: &str) {
    use std::path::Path;
    use self::rusqlite::bypass_sqlite_version_check;
    use self::rusqlite::Connection;
    use std::env::home_dir;

    let home = home_dir().unwrap();
    let wallet_dir = format!(".indy_client/wallet/{}/sqlite.db", wallet_name);
    let wallet_dir = Path::new(&wallet_dir);
    let wallet_db = home.join(wallet_dir);

    wallet::init_wallet(wallet_name).unwrap();
    unsafe { bypass_sqlite_version_check(); }
    let connection = Connection::open(wallet_db.as_path()).unwrap();

    for entry in DEV_ENTRIES {
        connection.execute("INSERT OR REPLACE INTO wallet VALUES (?,?,?)", &[&entry[0].to_string(), &entry[1].to_string(), &entry[2].to_string()]).unwrap();
    }
    connection.close().unwrap();
    wallet::close_wallet().unwrap();
}

#[cfg(test)]
mod tests {
    use super::*;

    #[ignore]
    #[test]
    fn test_dev_env_setup() {
        // Use this test to setup a complete wallet for external use
        setup_dev_env("pyvcx");
        ::utils::libindy::anoncreds::libindy_prover_create_master_secret(::settings::DEFAULT_LINK_SECRET_ALIAS).unwrap();
    }
}
